This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
client.schema.ts
dietPlan.schema.ts
foodItem.schema.ts
mealLog.schema.ts
organization.schema.ts
weightLog.schema.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="client.schema.ts">
import { z } from 'zod';

export const createClientSchema = z.object({
    fullName: z.string().min(2, 'Full name must be at least 2 characters'),
    email: z.string().email('Invalid email format'),
    phone: z.string().min(10, 'Phone must be at least 10 characters'),
    dateOfBirth: z.string().optional(),
    gender: z.enum(['male', 'female', 'other']).optional(),
    heightCm: z.number().min(50).max(300).optional(),
    currentWeightKg: z.number().min(10).max(500).optional(),
    targetWeightKg: z.number().min(10).max(500).optional(),
    targetCalories: z.number().min(500).max(10000).optional().nullable(),
    targetProteinG: z.number().min(0).max(500).optional().nullable(),
    targetCarbsG: z.number().min(0).max(1000).optional().nullable(),
    targetFatsG: z.number().min(0).max(500).optional().nullable(),
    activityLevel: z.enum(['sedentary', 'light', 'moderate', 'active', 'very_active']).optional(),
    primaryDietitianId: z.string().uuid().optional(),
    dietaryPreferences: z.array(z.string().min(1).max(100)).max(30).optional().default([]),
    allergies: z.array(z.string().min(1).max(100)).max(20).optional().default([]),
    medicalConditions: z.array(z.string().min(1).max(100)).max(20).optional().default([]),
    medications: z.array(z.string().min(1).max(100)).max(30).optional().default([]),
    healthNotes: z.string().optional()
});

export const updateClientSchema = createClientSchema.partial();

export const clientIdParamSchema = z.object({
    id: z.string().uuid('Invalid client ID')
});

export type CreateClientInput = z.infer<typeof createClientSchema>;
export type UpdateClientInput = z.infer<typeof updateClientSchema>;
</file>

<file path="dietPlan.schema.ts">
import { z } from 'zod';

export const createDietPlanSchema = z.object({
    clientId: z.string().uuid('Invalid client ID'),
    name: z.string().min(2, 'Plan name must be at least 2 characters'),
    description: z.string().optional(),
    startDate: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid start date'),
    endDate: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid end date').optional(),
    targetCalories: z.number().min(500).max(10000).optional(),
    targetProteinG: z.number().min(0).max(500).optional(),
    targetCarbsG: z.number().min(0).max(1000).optional(),
    targetFatsG: z.number().min(0).max(500).optional(),
    targetFiberG: z.number().min(0).max(200).optional(),
    notesForClient: z.string().optional(),
    internalNotes: z.string().optional(),
    meals: z.array(z.object({
        dayIndex: z.number().min(0).max(6).optional(),
        mealDate: z.string().optional(),
        mealType: z.string(),
        timeOfDay: z.string().optional(),
        title: z.string(),
        description: z.string().optional(),
        instructions: z.string().optional(),
        foodItems: z.array(z.object({
            foodId: z.string().uuid(),
            quantity: z.number().min(0),
            notes: z.string().optional()
        })).optional()
    })).optional(),
    options: z.object({
        saveAsTemplate: z.boolean().optional(),
        templateCategory: z.string().optional()
    }).optional()
});

export const updateDietPlanSchema = createDietPlanSchema.partial().omit({ clientId: true });

export type CreateDietPlanInput = z.infer<typeof createDietPlanSchema>;
export type UpdateDietPlanInput = z.infer<typeof updateDietPlanSchema>;
</file>

<file path="foodItem.schema.ts">
import { z } from 'zod';

// Create Food Item
export const createFoodItemSchema = z.object({
    name: z.string().min(1, 'Name is required').max(255),
    brand: z.string().max(100).optional(),
    category: z.string().min(1, 'Category is required'),
    subCategory: z.string().optional(),
    servingSizeG: z.number().positive().default(100),
    calories: z.number().int().min(0),
    proteinG: z.number().min(0).optional(),
    carbsG: z.number().min(0).optional(),
    fatsG: z.number().min(0).optional(),
    fiberG: z.number().min(0).optional(),
    sodiumMg: z.number().min(0).optional(),
    sugarG: z.number().min(0).optional(),
    barcode: z.string().optional(),
    allergenFlags: z.array(z.string()).default([]),
    dietaryTags: z.array(z.string()).default([])
});

export type CreateFoodItemInput = z.infer<typeof createFoodItemSchema>;

// Update Food Item
export const updateFoodItemSchema = createFoodItemSchema.partial();

export type UpdateFoodItemInput = z.infer<typeof updateFoodItemSchema>;

// Add Food to Meal
export const addFoodToMealSchema = z.object({
    foodId: z.string().uuid(),
    quantityG: z.number().positive(),
    notes: z.string().optional()
});

export type AddFoodToMealInput = z.infer<typeof addFoodToMealSchema>;

// Update Food in Meal
export const updateMealFoodItemSchema = z.object({
    quantityG: z.number().positive().optional(),
    notes: z.string().optional()
});

export type UpdateMealFoodItemInput = z.infer<typeof updateMealFoodItemSchema>;
</file>

<file path="mealLog.schema.ts">
import { z } from 'zod';

export const createMealLogSchema = z.object({
    clientId: z.string().uuid('Invalid client ID'),
    mealId: z.string().uuid('Invalid meal ID'),
    scheduledDate: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid scheduled date'),
    scheduledTime: z.string().optional()
});

export const updateMealLogSchema = z.object({
    status: z.enum(['pending', 'eaten', 'substituted', 'skipped']).optional(),
    photoUrl: z.string().url().optional(),
    clientNotes: z.string().optional(),
    substituteDescription: z.string().optional(),
    substituteCaloriesEst: z.number().optional()
});

export const reviewMealLogSchema = z.object({
    dietitianFeedback: z.string().optional(),
    status: z.enum(['pending', 'eaten', 'substituted', 'skipped']).optional(),
    overrideCalories: z.number().optional()
});

export const mealLogQuerySchema = z.object({
    clientId: z.string().uuid().optional(),
    dateFrom: z.string().optional(),
    dateTo: z.string().optional(),
    status: z.enum(['pending', 'eaten', 'substituted', 'skipped']).optional(),
    page: z.string().optional().default('1'),
    pageSize: z.string().optional().default('20'),
    sortBy: z.string().optional().default('scheduledDate')
});

export type CreateMealLogInput = z.infer<typeof createMealLogSchema>;
export type UpdateMealLogInput = z.infer<typeof updateMealLogSchema>;
export type ReviewMealLogInput = z.infer<typeof reviewMealLogSchema>;
</file>

<file path="organization.schema.ts">
import { z } from 'zod';

export const createOrganizationSchema = z.object({
    name: z.string().min(2, 'Organization name must be at least 2 characters'),
    description: z.string().optional(),
    email: z.string().email('Invalid email format').optional(),
    phone: z.string().optional(),
    address: z.string().optional(),
    city: z.string().optional(),
    country: z.string().default('IN'),
    timezone: z.string().default('Asia/Kolkata')
});

export type CreateOrganizationInput = z.infer<typeof createOrganizationSchema>;
</file>

<file path="weightLog.schema.ts">
import { z } from 'zod';

export const createWeightLogSchema = z.object({
    logDate: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid log date'),
    logTime: z.string().optional(),
    weightKg: z.number().min(10, 'Weight must be at least 10kg').max(500, 'Weight must be less than 500kg'),
    notes: z.string().optional(),
    progressPhotoUrl: z.string().url().optional()
});

export const weightLogQuerySchema = z.object({
    clientId: z.string().uuid('Invalid client ID'),
    dateFrom: z.string().optional(),
    dateTo: z.string().optional(),
    page: z.string().optional().default('1'),
    pageSize: z.string().optional().default('100')
});

export type CreateWeightLogInput = z.infer<typeof createWeightLogSchema>;
</file>

</files>
